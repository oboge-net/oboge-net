kQ();nN();kK();oT();function nN(){var sH=document.getElementById('video'),wH=document.getElementById('audio'),ul,hH,uH='active';if(sH){var xQ=document.getElementById('video-download').childNodes[1];ul=document.getElementsByTagName('UL')[0];hH=qK(sH);if(ul.className='playlist'){zH(ul,oK);var img;for(var i=0;i<ul.childNodes.length;i++){img=document.createElement('img');img.src='http://oboge.net/video/images/s'+ul.childNodes[i].getAttribute('data-url').match(/\/[a-z0-9_-]+\/[a-z0-9_-]+\./)+'jpg';ul.childNodes[i].insertBefore(img,ul.childNodes[i].firstChild);}zH(sH,function(){zK(ul,sH,hH,xQ);},'ended');}}if(wH){var sQ=document.getElementById('audio-download').firstChild,audio=wH.firstChild.lastChild,fH=qK(audio);zH(wH.lastChild,function(hT){fN(mT(hT),wH.lastChild,audio,fH,sQ);});zH(audio,function(){zK(wH.lastChild,audio,fH,sQ);},'ended');}function zK(zN,tQ,jQ,a){var li=eN(zN.childNodes)[0],eT;if(li){eT=li.nextSibling;if(!eT){eT=zN.firstChild;}fN(eT,zN,tQ,jQ,a);}}function qK(tQ){var p=tQ.firstChild;if(p){var type='audio/mpeg';if(tQ.src.slice(-3)=='mp4'){type='video/mp4';}if(tQ.canPlayType){if(tQ.canPlayType(type)!==''){return 2;}else{tQ.removeChild(p);if(tQ.nextSibling){tQ.parentNode.insertBefore(p,tQ.nextSibling);}else{tQ.parentNode.appendChild(p);}return 1;}}}return 0;}function oK(hT){var raf=getR()||function(func){setTimeout(func,67);},height=sH.offsetHeight,wK=null;if(scrollBy){raf(nH);}fN(mT(hT),ul,sH,hH,xQ);function nH(hN){var time=hN||new Date().getTime();if(!wK){wK=time;}if(time-wK<2000){var diff=sH.offsetHeight-height;if(diff){scrollBy(0,diff);}else{raf(nH);}}}}function mT(hT){var e=lE(hT);if(e&&e.parentNode.nodeName=='LI'){return e.parentNode;}else if(e&&e.nodeName=='LI'){return e;}return null;}function fN(li,zN,tQ,jQ,a){if(li){var url=li.getAttribute('data-url');if(url.charAt(0)=='/'){url='http://'+location.hostname+url;}else{url='http://'+url;}if(url!=tQ.src||jQ==0){eN(zN.childNodes)[0].className='';li.className=uH;uB(cQ,zN,Math.max(0,(zN.firstChild.offsetHeight+1)*(eN(zN.childNodes)[1]-2)),500);if(jQ>=1){tQ.src=url;tQ.load();if(jQ==2){tQ.play();}}if(jQ<=1){a.href=url;}}}}function cQ(pos,e){e.scrollTop=pos;}function eN(e){for(var i=0;i<e.length;i++){if(e[i].className==uH){return[e[i],i];}}return[null,-1];}function uB(func,gQ,yN,uK){var raf=getR()||function(func){setTimeout(func,67);},jK,t=null,xN=true;if(gQ===window){jK=window.pageYOffset||document.documentElement.scrollTop;}else{jK=gQ.scrollTop;}var gT=(yN-jK)/uK;gT=gT.toFixed(2);if(jK>yN){xN=false;}raf(kN);function kN(hN){if(!hN)hN=new Date().getTime();if(!t)t=jK-Math.round(gT*hN);var fT=t+Math.round(gT*hN);if((xN&&fT<yN)||(!xN&&fT>yN)){func(fT,gQ);raf(kN);}else{func(yN,gQ);}}}function lE(e){if(e){if(e.target){return e.target;}if(e.srcElement){return e.srcElement;}}return null;}}function kQ(){if(document.body.offsetWidth<=640){var pQ=document.getElementById('header'),menu=document.createElement('div');pQ.insertBefore(menu,pQ.firstChild);zH(menu,iK);}function iK(){var mQ=document.getElementById('menu');for(var i=0;i<3;i++){mQ.appendChild(mQ.removeChild(mQ.firstChild));}}}function kK(){var d=['vk','od','ma','fb'];for(var i=0;i<4;i++){document.getElementById(d[i]).onclick=n;}function n(){var w=document.body.clientWidth-20;var h=document.body.clientHeight-20;if(w>600&&h>500){w=600;h=500;}open(this.href,'_blank','width='+w+',height='+h+',scrollbars');return false;}}function oT(){if(document.body.offsetWidth>640&&(!window.getComputedStyle||window.getComputedStyle(document.getElementById('header')).backgroundRepeat=='repeat')){e=document.createElement('link');e.rel='stylesheet';e.type='text/css';e.href='/style/oboge-ie8-1802.css';document.body.appendChild(e);}}function zH(e,func,type){if(e){if(!type){type='click';}if(e.addEventListener){e.addEventListener(type,func,false);}else if(e.attachEvent){e.attachEvent('on'+type,func);}else if(e['on'+type]){e['on'+type]=func;}}}